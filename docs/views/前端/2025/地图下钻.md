---
title: åœ°å›¾ä¸‹é’»
date: 2025-02-12
sidebar: auto
tags:
  - js
  - Vue
  - echarts
categories:
  - å‰ç«¯
---

## ğŸŒ ç®€å•çš„å…¨çƒ

- æ­¥éª¤ä¸€ï¼šä»£ç 

  ```javascript
  <template>
    <div
      v-loading="loading"
      class="charts-box"
      element-loading-text="åŠ è½½ä¸­..."
    >
      <div class="pie-wrapper">
        <div id="mapWorld" class="mapWorld">
          123
        </div>
      </div>
    </div>
  </template>
  <script lang="ts" setup>
  import { ref, onMounted } from 'vue';
  // éœ€è¦å®‰è£…echarts-gl
  import 'echarts-gl';
  import { zxios } from '@/services/api';
  import 'echarts/extension/bmap/bmap';
  const ec = <any>inject('echarts');
  let chart = <any>{};
  let mapChart = <any>{};
  let dataMap = <any[]>[];

  onMounted(() => {
    // æ•´ä¸ªç”»å¸ƒ
    let canvas = document.createElement('canvas');
    mapChart = ec.init(canvas, null, {
      width: 4096,
      height: 2048,
    });
    getDataSet();
    chart = ec.init(document.getElementById('mapWorld'));
    // çƒä½“
    chart.setOption({
      backgroundColor: 'transparent',
      globe: {
        //  ä½¿ç”¨å®˜æ–¹ç¤ºä¾‹åœ°çƒè´´å›¾ï¼ˆå¯ä»¥æ¢ï¼‰
        baseTexture:
          'https://cdn.jsdelivr.net/gh/apache/echarts-examples/public/data-gl/asset/world.topo.bathy.200401.jpg',
        // heightTexture:  // å¯é€‰çš„é«˜ç¨‹è´´å›¾
        shading: 'color',
        environment: 'none', // å»æ‰èƒŒæ™¯å®‡å®™å›¾
        viewControl: {
          autoRotate: true, // è‡ªåŠ¨æ—‹è½¬
          autoRotateSpeed: 5,
          distance: 180, // æ‘„åƒæœºè·ç¦»
        },
        light: {
          ambient: {
            intensity: 0.5,
          },
          main: {
            intensity: 0.8,
          },
        },
      },
    });
  });
  </script>
  <style lang="scss" scoped>
  .pie-wrapper {
    width: 100%;
    height: 100%;
    position: relative;

    .mapWorld {
      width: 100%;
      height: 100%;
    }
  }
  </style>
  ```

- ğŸ¥ æ•ˆæœå±•ç¤º

<video src="/video/åŸå§‹ä¸–ç•Œåœ°å›¾.mp4" controls autoplay loop muted   width="100%"></video>

## ğŸŒ å®Œæ•´çš„å…¨çƒ

- ä»£ç ä¼˜åŒ–æ–¹é¢ï¼Œä¹Ÿå¯ä»¥æŠŠ dataPie,geoCoordMap,nameMap ä¸‰ä¸ªå€¼å•ç‹¬æŠ½æˆä¸€ä¸ª ts æ–‡ä»¶

```javascript
<template>
  <div v-loading="loading" class="charts-box" element-loading-text="åŠ è½½ä¸­...">
    <div class="pie-wrapper">
      <div id="mapWorld" class="mapWorld">123</div>
    </div>
  </div>
</template>

<script lang="ts" setup>
  import { ref, onMounted } from 'vue';
  // éœ€è¦å®‰è£…echarts-gl
  import 'echarts-gl';
  import { zxios } from '@/services/api';
  import 'echarts/extension/bmap/bmap';
  const ec = <any>inject('echarts');
  let chart = <any>{};
  let mapChart = <any>{};
  let dataMap = <any[]>[];

  const convertData = (data) => {
    var res = <any[]>[];
    for (var i = 0; i < data.length; i++) {
      var geoCoord = geoCoordMap[data[i].name];
      if (geoCoord) {
        res.push({
          name: data[i].name,
          value: geoCoord.concat(data[i].value > 0 ? data[i].value : 0),
        });
      }
    }
    return res;
  }
  onMounted(() => {
    // æ•´ä¸ªç”»å¸ƒ
    let canvas = document.createElement('canvas');
    mapChart = ec.init(canvas, null, {
      width: 4096,
      height: 2048,
    });
    getDataSet();
    chart = ec.init(document.getElementById('mapWorld'));
    // çƒä½“
    chart.setOption({
      backgroundColor: 'rgba(0,0,0,0)', //canvasçš„èƒŒæ™¯é¢œè‰²
      tooltip: {
        trigger: 'item',
        position: 'top',
        backgroundColor: 'rgba(0,0,0,0)',
        formatter: (params) => {
          return ``;
        },
      },
      globe: {
        baseTexture: mapChart,
        top: 'middle',
        left: 'center',
        displacementScale: 0,
        environment: 'none',
        shading: 'color',
        viewControl: {
          distance: 160,
          autoRotate: true,
          autoRotateAfterStill: 4,
        },
      },
      roam: true,
      series: [],
    });
  });


  const getDataSet = () => {
    dataMap = [];
    if (dataPie.value.length > 0) {
      let nameArr = <any[]>[];
      dataPie.value.map((item: any) => {
        nameArr.push({
          name: item.name,
          value: item.amount,
        });
      });
      Object.getOwnPropertyNames(nameMap).forEach((key) => {
        dataMap.push({
          name: nameMap[key],
          value: 0,
          type: 'country',
          enName: key,
        });
      });
      dataMap.forEach((item) => {
        nameArr.map((element) => {
          if (item.name == element.name) {
            item.value = element.value;
          }
        });
      });
    }
    zxios.get('./json/world.json').then((mapJson) => {
      // éœ€è¦å…ˆè·å–åæ ‡
      ec.registerMap('world', JSON.parse(JSON.stringify(mapJson)));
      // çƒä½“ä¸Šé¢çš„å†…å®¹
      mapChart.setOption({
        backgroundColor: 'rgba(3,28,72,0.3)',
        geo: {
          type: 'map',
          map: 'world',
          left: 0,
          top: 0,
          right: 0,
          bottom: 0,
          boundingCoords: [
            [-180, 90],
            [180, -90],
          ],
          zoom: 0,
          roam: false,
        },
        visualMap: {
          type: 'continuous',
          itemWidth: 0,
          itemHeight: 0,
          fontSize: 0,
          min: 0,
          text: ['', ''],
          realtime: true,
          seriesIndex: [0],
          inRange: {
            color: ['#1587FF', '#001EBF'],
          },
        },
        series: [
          {
            type: 'map',
            nameMap: nameMap,
            map: 'world',
            left: 0,
            top: 0,
            right: 0,
            bottom: 0,
            boundingCoords: [
              [-180, 90],
              [180, -90],
            ],
            zoom: 0,
            roam: false,
            nameProperty: 'name',
            selectedMode: 'single',
            itemStyle: {
              areaColor: '#0253c8',
              borderWidth: 1,
              borderType: 'solid',
              borderColor: '#fff',
            },
            emphasis: {
              label: {
                show: true,
                fontFamily: 'Microsoft YaHei',
                fontSize: 18,
                color: '#fff',
                align: 'center',
                rich: {
                  a: {
                    fontSize: 18,
                    color: '#fff',
                    width: 60,
                    height: 20,
                    lineHeight: 20,
                  },
                  b: {
                    fontSize: 16,
                    color: '#fff',
                    width: 60,
                  },
                },
              },
              itemStyle: {
                areaColor: '#1587FF',
                shadowBlur: 8,
                shadowColor: 'rgba(0, 0, 0, 0.5)',
                shadowOffsetX: 8,
                shadowOffsetY: 10,
              },
            },
            label: {
              // show:true,
              fontSize: 20,
              color: 'white',
              formatter: '{c}\n{b}',
            },
            data: dataMap,
          },
          {
            name: 'Top 5',
            type: 'effectScatter',
            coordinateSystem: 'geo',
            data: convertData(
              dataMap
                .sort(function (a, b) {
                  return b.value - a.value;
                })
                .slice(0, 10),
            ),
            symbolSize: function (val) {
              return val[2] > 0 ? 20 : 0;
            },
            showEffectOn: 'render',
            rippleEffect: {
              brushType: 'stroke',
            },
            label: {
              show: false,
            },
            emphasis: {
              scale: true,
            },
            itemStyle: {
              color: '#FC982A',
              shadowBlur: 10,
              shadowColor: '#FC982A',
            },
            zlevel: 5,
          },
        ],
      });
    });
  };
const dataPie = ref<any>([
    { name: 'è¶Šå—', amount: 5230 },
    { name: 'æŸ¬åŸ”å¯¨', amount: 3710 },
    { name: 'è²å¾‹å®¾', amount: 2460 },
    { name: 'é©¬æ¥è¥¿äºš', amount: 4120 },
    { name: 'å°¼æ³Šå°”', amount: 2200 },
    { name: 'æ–¯é‡Œå…°å¡', amount: 4800 },
    { name: 'å·´åŸºæ–¯å¦', amount: 2900 },
    { name: 'æ³°å›½', amount: 5500 },
    { name: 'ç¼…ç”¸', amount: 1650 },
    { name: 'è€æŒ', amount: 1350 },
    { name: 'å°åº¦å°¼è¥¿äºš', amount: 3200 },
    { name: 'è’™å¤', amount: 1800 },
    { name: 'ä¹Œå…¹åˆ«å…‹æ–¯å¦', amount: 2500 },
    { name: 'åœŸè€³å…¶å…±å’Œå›½', amount: 4600 },
    { name: 'å‰å°”å‰æ–¯æ–¯å¦', amount: 2100 },
    { name: 'å­ŸåŠ æ‹‰å›½', amount: 3100 },
    { name: 'è‚¯å°¼äºš', amount: 1200 },
    { name: 'ä¸­éå…±å’Œå›½', amount: 900 },
    { name: 'èµæ¯”äºš', amount: 980 },
    { name: 'å‡ å†…äºš', amount: 880 },
    { name: 'å¸ƒéš†è¿ª', amount: 770 },
    { name: 'å°¼æ—¥åˆ©äºš', amount: 2100 },
    { name: 'æ¯›åˆ©å¦å°¼äºš', amount: 950 },
    { name: 'åŸƒå¡ä¿„æ¯”äºš', amount: 1900 },
    { name: 'æ‘©æ´›å“¥', amount: 2300 },
    { name: 'å¢æ—ºè¾¾', amount: 1100 },
    { name: 'å¦æ¡‘å°¼äºš', amount: 1600 },
    { name: 'åŠ çº³', amount: 2500 },
    { name: 'æ¯›é‡Œæ±‚æ–¯', amount: 950 },
    { name: 'å¡å†…åŠ å°”', amount: 1700 },
    { name: 'é©¬å…¶é¡¿', amount: 1800 },
    { name: 'å¡å°”ç»´äºš', amount: 2100 },
    { name: 'å·´å¸ƒäºšæ–°å‡ å†…äºš', amount: 700 },
    { name: 'è¨æ‘©äºš', amount: 820 },
    { name: 'å§”å†…ç‘æ‹‰', amount: 2200 },
    { name: 'ç»åˆ©ç»´äºš', amount: 1300 },
    { name: 'è‹±å›½', amount: 8500 },
    { name: 'ç¾å›½', amount: 21000 },
    { name: 'åŠ æ‹¿å¤§', amount: 8700 },
    { name: 'å¤å·´', amount: 500 },
    { name: 'è«æ¡‘æ¯”å…‹', amount: 150 },
    { name: 'åŒˆç‰™åˆ©', amount: 2800 },
    { name: 'æ¾³å¤§åˆ©äºš', amount: 9200 },
    { name: 'æ–°è¥¿å…°', amount: 3400 },
    { name: 'ä¸­å›½', amount: 79607 },
  ]);
  const nameMap = {
    '': '',
    "CÃ´te d'Ivoire": 'ç§‘ç‰¹è¿ªç“¦',
    Canada: 'åŠ æ‹¿å¤§',
    Turkmenistan: 'åœŸåº“æ›¼æ–¯å¦',
    'Saint Helena': 'åœ£èµ«å‹’æ‹¿',
    'Lao PDR': 'è€æŒ',
    Lithuania: 'ç«‹é™¶å®›',
    Cambodia: 'æŸ¬åŸ”å¯¨',
    Ethiopia: 'åŸƒå¡ä¿„æ¯”äºš',
    'Faeroe Is.': 'æ³•ç½—ç¾¤å²›',
    Swaziland: 'æ–¯å¨å£«å…°',
    Palestine: 'å·´å‹’æ–¯å¦',
    Belize: 'ä¼¯åˆ©å…¹',
    Argentina: 'é˜¿æ ¹å»·',
    Bolivia: 'ç»åˆ©ç»´äºš',
    Cameroon: 'å–€éº¦éš†',
    'Burkina Faso': 'å¸ƒåŸºçº³æ³•ç´¢',
    Aland: 'å¥¥å…°ç¾¤å²›',
    Bahrain: 'å·´æ—',
    'Saudi Arabia': 'æ²™ç‰¹é˜¿æ‹‰ä¼¯',
    'Fr. Polynesia': 'æ³•å±æ³¢åˆ©å°¼è¥¿äºš',
    'Cape Verde': 'ä½›å¾—è§’',
    'W. Sahara': 'è¥¿æ’’å“ˆæ‹‰',
    Slovenia: 'æ–¯æ´›æ–‡å°¼äºš',
    Guatemala: 'å±åœ°é©¬æ‹‰',
    Guinea: 'å‡ å†…äºš',
    'Dem. Rep. Congo': 'åˆšæœï¼ˆé‡‘ï¼‰',
    Germany: 'å¾·å›½',
    Spain: 'è¥¿ç­ç‰™',
    Liberia: 'åˆ©æ¯”é‡Œäºš',
    Netherlands: 'è·å…°',
    Jamaica: 'ç‰™ä¹°åŠ ',
    'Solomon Is.': 'æ‰€ç½—é—¨ç¾¤å²›',
    Oman: 'é˜¿æ›¼',
    Tanzania: 'å¦æ¡‘å°¼äºš',
    'Costa Rica': 'å“¥æ–¯è¾¾é»åŠ ',
    'Isle of Man': 'æ›¼å²›',
    Gabon: 'åŠ è“¬',
    Niue: 'çº½åŸƒ',
    Bahamas: 'å·´å“ˆé©¬',
    'New Zealand': 'æ–°è¥¿å…°',
    Yemen: 'ä¹Ÿé—¨',
    Jersey: 'æ³½è¥¿å²›',
    Pakistan: 'å·´åŸºæ–¯å¦',
    Albania: 'é˜¿å°”å·´å°¼äºš',
    Samoa: 'è¨æ‘©äºš',
    'Czech Rep.': 'æ·å…‹',
    'United Arab Emirates': 'é˜¿æ‹‰ä¼¯è”åˆé…‹é•¿å›½',
    Guam: 'å…³å²›',
    India: 'å°åº¦',
    Azerbaijan: 'é˜¿å¡æ‹œç–†',
    'N. Mariana Is.': 'åŒ—é©¬é‡Œäºšçº³ç¾¤å²›',
    Lesotho: 'è±ç´¢æ‰˜',
    Kenya: 'è‚¯å°¼äºš',
    Belarus: 'ç™½ä¿„ç½—æ–¯',
    Tajikistan: 'å¡”å‰å…‹æ–¯å¦',
    Turkey: 'åœŸè€³å…¶',
    Afghanistan: 'é˜¿å¯Œæ±—',
    Bangladesh: 'å­ŸåŠ æ‹‰å›½',
    Mauritania: 'æ¯›é‡Œå¡”å°¼äºš',
    'Dem. Rep. Korea': 'æœé²œ',
    'Saint Lucia': 'åœ£å¢è¥¿äºš',
    'Br. Indian Ocean Ter.': 'è‹±å±å°åº¦æ´‹é¢†åœ°',
    Mongolia: 'è’™å¤',
    France: 'æ³•å›½',
    'Cura?ao': 'åº“æ‹‰ç´¢å²›',
    'S. Sudan': 'å—è‹ä¸¹',
    Rwanda: 'å¢æ—ºè¾¾',
    Slovakia: 'æ–¯æ´›ä¼å…‹',
    Somalia: 'ç´¢é©¬é‡Œ',
    Peru: 'ç§˜é²',
    Vanuatu: 'ç“¦åŠªé˜¿å›¾',
    Norway: 'æŒªå¨',
    Malawi: 'é©¬æ‹‰ç»´',
    Benin: 'è´å®',
    'St. Vin. and Gren.': 'åœ£æ–‡æ£®ç‰¹å’Œæ ¼æ—çº³ä¸æ–¯',
    Korea: 'éŸ©å›½',
    Singapore: 'æ–°åŠ å¡',
    Montenegro: 'é»‘å±±å…±å’Œå›½',
    'Cayman Is.': 'å¼€æ›¼ç¾¤å²›',
    Togo: 'å¤šå“¥',
    China: 'ä¸­å›½',
    'Heard I. and McDonald Is.': 'èµ«å¾·å²›å’Œéº¦å…‹å”çº³ç¾¤å²›',
    Armenia: 'äºšç¾å°¼äºš',
    'Falkland Is.': 'é©¬å°”ç»´çº³æ–¯ç¾¤å²›ï¼ˆç¦å…‹å…°ï¼‰',
    Ukraine: 'ä¹Œå…‹å…°',
    Ghana: 'åŠ çº³',
    Tonga: 'æ±¤åŠ ',
    Finland: 'èŠ¬å…°',
    Libya: 'åˆ©æ¯”äºš',
    'Dominican Rep.': 'å¤šç±³å°¼åŠ ',
    Indonesia: 'å°åº¦å°¼è¥¿äºš',
    Mauritius: 'æ¯›é‡Œæ±‚æ–¯',
    'Eq. Guinea': 'èµ¤é“å‡ å†…äºš',
    Sweden: 'ç‘å…¸',
    Vietnam: 'è¶Šå—',
    Mali: 'é©¬é‡Œ',
    Russia: 'ä¿„ç½—æ–¯',
    Bulgaria: 'ä¿åŠ åˆ©äºš',
    'United States': 'ç¾å›½',
    Romania: 'ç½—é©¬å°¼äºš',
    Angola: 'å®‰å“¥æ‹‰',
    Chad: 'ä¹å¾—',
    'South Africa': 'å—é',
    Fiji: 'æ–æµ',
    Liechtenstein: 'åˆ—æ”¯æ•¦å£«ç™»',
    Malaysia: 'é©¬æ¥è¥¿äºš',
    Austria: 'å¥¥åœ°åˆ©',
    Mozambique: 'è«æ¡‘æ¯”å…‹',
    Uganda: 'ä¹Œå¹²è¾¾',
    Japan: 'æ—¥æœ¬',
    Niger: 'å°¼æ—¥å°”',
    Brazil: 'å·´è¥¿',
    Kuwait: 'ç§‘å¨ç‰¹',
    Panama: 'å·´æ‹¿é©¬',
    Guyana: 'åœ­äºšé‚£',
    Madagascar: 'é©¬è¾¾åŠ æ–¯åŠ ',
    Luxembourg: 'å¢æ£®å ¡',
    'American Samoa': 'ç¾å±è¨æ‘©äºš',
    Andorra: 'å®‰é“å°”',
    Ireland: 'çˆ±å°”å…°',
    Italy: 'æ„å¤§åˆ©',
    Nigeria: 'å°¼æ—¥åˆ©äºš',
    'Turks and Caicos Is.': 'ç‰¹å…‹æ–¯å’Œå‡¯ç§‘æ–¯ç¾¤å²›',
    Ecuador: 'å„ç“œå¤šå°”',
    'U.S. Virgin Is.': 'ç¾å±ç»´å°”äº¬ç¾¤å²›',
    Brunei: 'æ–‡è±',
    Australia: 'æ¾³å¤§åˆ©äºš',
    Iran: 'ä¼Šæœ—',
    Algeria: 'é˜¿å°”åŠåˆ©äºš',
    'El Salvador': 'è¨å°”ç“¦å¤š',
    "C?te d'Ivoire": 'ç§‘ç‰¹è¿ªç“¦',
    Chile: 'æ™ºåˆ©',
    'Puerto Rico': 'æ³¢å¤šé»å„',
    Belgium: 'æ¯”åˆ©æ—¶',
    Thailand: 'æ³°å›½',
    Haiti: 'æµ·åœ°',
    Iraq: 'ä¼Šæ‹‰å…‹',
    'S?o TomÃ© and Principe': 'åœ£å¤šç¾å’Œæ™®æ—è¥¿æ¯”',
    'Sierra Leone': 'å¡æ‹‰åˆ©æ˜‚',
    Georgia: 'æ ¼é²å‰äºš',
    Denmark: 'ä¸¹éº¦',
    Philippines: 'è²å¾‹å®¾',
    'S. Geo. and S. Sandw. Is.': 'å—ä¹”æ²»äºšå²›å’Œå—æ¡‘å¨å¥‡ç¾¤å²›',
    Moldova: 'æ‘©å°”å¤šç“¦',
    Morocco: 'æ‘©æ´›å“¥',
    Namibia: 'çº³ç±³æ¯”äºš',
    Malta: 'é©¬è€³ä»–',
    'Guinea-Bissau': 'å‡ å†…äºšæ¯”ç»',
    Kiribati: 'åŸºé‡Œå·´æ–¯',
    Switzerland: 'ç‘å£«',
    Grenada: 'æ ¼æ—çº³è¾¾',
    Seychelles: 'å¡èˆŒå°”',
    Portugal: 'è‘¡è„ç‰™',
    Estonia: 'çˆ±æ²™å°¼äºš',
    Uruguay: 'ä¹Œæ‹‰åœ­',
    'Antigua and Barb.': 'å®‰æç“œå’Œå·´å¸ƒè¾¾',
    Lebanon: 'é»å·´å«©',
    Uzbekistan: 'ä¹Œå…¹åˆ«å…‹æ–¯å¦',
    Tunisia: 'çªå°¼æ–¯',
    Djibouti: 'å‰å¸ƒæ',
    Greenland: 'æ ¼é™µå…°',
    'Timor-Leste': 'ä¸œå¸æ±¶',
    Dominica: 'å¤šç±³å°¼å…‹',
    Colombia: 'å“¥ä¼¦æ¯”äºš',
    Burundi: 'å¸ƒéš†è¿ª',
    'Bosnia and Herz.': 'æ³¢æ–¯å°¼äºšå’Œé»‘å¡å“¥ç»´é‚£',
    Cyprus: 'å¡æµ¦è·¯æ–¯',
    Barbados: 'å·´å·´å¤šæ–¯',
    Qatar: 'å¡å¡”å°”',
    Palau: 'å¸•åŠ³',
    Bhutan: 'ä¸ä¸¹',
    Sudan: 'è‹ä¸¹',
    Nepal: 'å°¼æ³Šå°”',
    Micronesia: 'å¯†å…‹ç½—å°¼è¥¿äºš',
    Bermuda: 'ç™¾æ…•å¤§',
    Suriname: 'è‹é‡Œå—',
    Venezuela: 'å§”å†…ç‘æ‹‰',
    Israel: 'ä»¥è‰²åˆ—',
    'St. Pierre and Miquelon': 'åœ£çš®åŸƒå°”å’Œå¯†å…‹éš†ç¾¤å²›',
    'Central African Rep.': 'ä¸­é',
    Iceland: 'å†°å²›',
    Zambia: 'èµæ¯”äºš',
    Senegal: 'å¡å†…åŠ å°”',
    'Papua New Guinea': 'å·´å¸ƒäºšæ–°å‡ å†…äºš',
    'Trinidad and Tobago': 'ç‰¹ç«‹å°¼è¾¾å’Œå¤šå·´å“¥',
    Zimbabwe: 'æ´¥å·´å¸ƒéŸ¦',
    Jordan: 'çº¦æ—¦',
    Gambia: 'å†ˆæ¯”äºš',
    Kazakhstan: 'å“ˆè¨å…‹æ–¯å¦',
    Poland: 'æ³¢å…°',
    Eritrea: 'å„ç«‹ç‰¹é‡Œäºš',
    Kyrgyzstan: 'å‰å°”å‰æ–¯æ–¯å¦',
    Montserrat: 'è’™ç‰¹å¡æ‹‰ç‰¹',
    'New Caledonia': 'æ–°å–€é‡Œå¤šå°¼äºš',
    Macedonia: 'é©¬å…¶é¡¿',
    Paraguay: 'å·´æ‹‰åœ­',
    Latvia: 'æ‹‰è„±ç»´äºš',
    Hungary: 'åŒˆç‰™åˆ©',
    Syria: 'å™åˆ©äºš',
    Honduras: 'æ´ªéƒ½æ‹‰æ–¯',
    Myanmar: 'ç¼…ç”¸',
    Mexico: 'å¢¨è¥¿å“¥',
    Egypt: 'åŸƒåŠ',
    Nicaragua: 'å°¼åŠ æ‹‰ç“œ',
    Cuba: 'å¤å·´',
    Serbia: 'å¡å°”ç»´äºš',
    Comoros: 'ç§‘æ‘©ç½—',
    'United Kingdom': 'è‹±å›½',
    'Fr. S. Antarctic Lands': 'å—ææ´²',
    Congo: 'åˆšæœï¼ˆå¸ƒï¼‰',
    Greece: 'å¸Œè…Š',
    'Sri Lanka': 'æ–¯é‡Œå…°å¡',
    Croatia: 'å…‹ç½—åœ°äºš',
    Botswana: 'åšèŒ¨ç“¦çº³',
    'Siachen Glacier': 'é”¡äºšç´å†°å·åœ°åŒº',
    'N. Cyprus': '',
    Asia: 'äºšæ´²',
    Africa: 'éæ´²',
    Europe: 'æ¬§æ´²',
    'North America': 'åŒ—ç¾æ´²',
    'South America': 'å—ç¾æ´²',
    Oceania: 'å¤§æ´‹æ´²',
  };
  const geoCoordMap = {
    é˜¿å¯Œæ±—: [67.709953, 33.93911],
    å®‰å“¥æ‹‰: [17.873887, -11.202692],
    é˜¿å°”å·´å°¼äºš: [20.168331, 41.153332],
    é˜¿è”é…‹: [53.847818, 23.424076],
    é˜¿æ ¹å»·: [-63.61667199999999, -38.416097],
    äºšç¾å°¼äºš: [45.038189, 40.069099],
    æ³•å±å—åŠçƒå’Œå—æé¢†åœ°: [69.348557, -49.280366],
    æ¾³å¤§åˆ©äºš: [133.775136, -25.274398],
    å¥¥åœ°åˆ©: [14.550072, 47.516231],
    é˜¿å¡æ‹œç–†: [47.576927, 40.143105],
    å¸ƒéš†è¿ª: [29.918886, -3.373056],
    æ¯”åˆ©æ—¶: [4.469936, 50.503887],
    è´å®: [2.315834, 9.30769],
    å¸ƒåŸºçº³æ³•ç´¢: [-1.561593, 12.238333],
    å­ŸåŠ æ‹‰å›½: [90.356331, 23.684994],
    ä¿åŠ åˆ©äºš: [25.48583, 42.733883],
    å·´å“ˆé©¬: [-77.39627999999999, 25.03428],
    æ³¢æ–¯å°¼äºšå’Œé»‘å¡å“¥ç»´é‚£: [17.679076, 43.915886],
    ç™½ä¿„ç½—æ–¯: [27.953389, 53.709807],
    ä¼¯åˆ©å…¹: [-88.49765, 17.189877],
    ç™¾æ…•å¤§: [-64.7505, 32.3078],
    ç»åˆ©ç»´äºš: [-63.58865299999999, -16.290154],
    å·´è¥¿: [-51.92528, -14.235004],
    æ–‡è±: [114.727669, 4.535277],
    ä¸ä¸¹: [90.433601, 27.514162],
    åšèŒ¨ç“¦çº³: [24.684866, -22.328474],
    ä¸­éå…±å’Œå›½: [20.939444, 6.611110999999999],
    åŠ æ‹¿å¤§: [-106.346771, 56.130366],
    ç‘å£«: [8.227511999999999, 46.818188],
    æ™ºåˆ©: [-71.542969, -35.675147],
    ä¸­å›½: [104.195397, 35.86166],
    è±¡ç‰™æµ·å²¸: [-5.547079999999999, 7.539988999999999],
    å–€éº¦éš†: [12.354722, 7.369721999999999],
    åˆšæœæ°‘ä¸»å…±å’Œå›½: [21.758664, -4.038333],
    åˆšæœå…±å’Œå›½: [15.827659, -0.228021],
    å“¥ä¼¦æ¯”äºš: [-74.297333, 4.570868],
    å“¥æ–¯è¾¾é»åŠ : [-83.753428, 9.748916999999999],
    å¤å·´: [-77.781167, 21.521757],
    åŒ—å¡æµ¦è·¯æ–¯: [33.429859, 35.126413],
    å¡æµ¦è·¯æ–¯: [33.429859, 35.126413],
    æ·å…‹å…±å’Œå›½: [15.472962, 49.81749199999999],
    å¾·å›½: [10.451526, 51.165691],
    å‰å¸ƒæ: [42.590275, 11.825138],
    ä¸¹éº¦: [9.501785, 56.26392],
    å¤šæ˜å°¼åŠ å…±å’Œå›½: [-70.162651, 18.735693],
    é˜¿å°”åŠåˆ©äºš: [1.659626, 28.033886],
    å„ç“œå¤šå°”: [-78.18340599999999, -1.831239],
    åŸƒåŠ: [30.802498, 26.820553],
    å„ç«‹ç‰¹é‡Œäºš: [39.782334, 15.179384],
    è¥¿ç­ç‰™: [-3.74922, 40.46366700000001],
    çˆ±æ²™å°¼äºš: [25.013607, 58.595272],
    åŸƒå¡ä¿„æ¯”äºš: [40.489673, 9.145000000000001],
    èŠ¬å…°: [25.748151, 61.92410999999999],
    æ–: [178.065032, -17.713371],
    ç¦å…‹å…°ç¾¤å²›: [-59.523613, -51.796253],
    æ³•å›½: [2.213749, 46.227638],
    åŠ è“¬: [11.609444, -0.803689],
    è‹±å›½: [-3.435973, 55.378051],
    æ ¼é²å‰äºš: [-82.9000751, 32.1656221],
    åŠ çº³: [-1.023194, 7.946527],
    å‡ å†…äºš: [-9.696645, 9.945587],
    å†ˆæ¯”äºš: [-15.310139, 13.443182],
    å‡ å†…äºšæ¯”ç»: [-15.180413, 11.803749],
    èµ¤é“å‡ å†…äºš: [10.267895, 1.650801],
    å¸Œè…Š: [21.824312, 39.074208],
    æ ¼é™µå…°: [-42.604303, 71.706936],
    å±åœ°é©¬æ‹‰: [-90.23075899999999, 15.783471],
    æ³•å±åœ­äºšé‚£: [-53.125782, 3.933889],
    åœ­äºšé‚£: [-58.93018, 4.860416],
    æ´ªéƒ½æ‹‰æ–¯: [-86.241905, 15.199999],
    å…‹ç½—åœ°äºš: [15.2, 45.1],
    æµ·åœ°: [-72.285215, 18.971187],
    åŒˆç‰™åˆ©: [19.503304, 47.162494],
    å°å°¼: [113.921327, -0.789275],
    çˆ±å°”å…°: [-8.24389, 53.41291],
    ä¼Šæœ—: [53.688046, 32.427908],
    ä¼Šæ‹‰å…‹: [43.679291, 33.223191],
    å†°å²›: [-19.020835, 64.963051],
    ä»¥è‰²åˆ—: [34.851612, 31.046051],
    æ„å¤§åˆ©: [12.56738, 41.87194],
    ç‰™ä¹°åŠ : [-77.297508, 18.109581],
    çº¦æ—¦: [36.238414, 30.585164],
    æ—¥æœ¬: [138.252924, 36.204824],
    å“ˆè¨å…‹æ–¯å¦: [66.923684, 48.019573],
    è‚¯å°¼äºš: [37.906193, -0.023559],
    å‰å°”å‰æ–¯æ–¯å¦: [74.766098, 41.20438],
    æŸ¬åŸ”å¯¨: [104.990963, 12.565679],
    éŸ©å›½: [127.766922, 35.907757],
    ç§‘ç´¢æ²ƒ: [20.902977, 42.6026359],
    ç§‘å¨ç‰¹: [47.481766, 29.31166],
    è€æŒ: [102.495496, 19.85627],
    é»å·´å«©: [35.862285, 33.854721],
    åˆ©æ¯”é‡Œäºš: [-9.429499000000002, 6.428055],
    åˆ©æ¯”äºš: [17.228331, 26.3351],
    æ–¯é‡Œå…°å¡: [80.77179699999999, 7.873053999999999],
    è±ç´¢æ‰˜: [28.233608, -29.609988],
    ç«‹é™¶å®›: [23.881275, 55.169438],
    å¢æ£®å ¡: [6.129582999999999, 49.815273],
    æ‹‰è„±ç»´äºš: [24.603189, 56.879635],
    æ‘©æ´›å“¥: [-7.092619999999999, 31.791702],
    æ‘©å°”å¤šç“¦: [28.369885, 47.411631],
    é©¬è¾¾åŠ æ–¯åŠ : [46.869107, -18.766947],
    å¢¨è¥¿å“¥: [-102.552784, 23.634501],
    é©¬å…¶é¡¿: [21.745275, 41.608635],
    é©¬é‡Œ: [-3.996166, 17.570692],
    ç¼…ç”¸: [95.956223, 21.913965],
    é»‘å±±: [19.37439, 42.708678],
    è’™å¤: [103.846656, 46.862496],
    è«æ¡‘æ¯”å…‹: [35.529562, -18.665695],
    æ¯›é‡Œå¡”å°¼äºš: [-10.940835, 21.00789],
    é©¬æ‹‰ç»´: [34.301525, -13.254308],
    é©¬æ¥è¥¿äºš: [101.975766, 4.210484],
    çº³ç±³æ¯”äºš: [18.49041, -22.95764],
    æ–°å–€é‡Œå¤šå°¼äºš: [165.618042, -20.904305],
    å°¼æ—¥å°”: [8.081666, 17.607789],
    å°¼æ—¥åˆ©äºš: [8.675277, 9.081999],
    å°¼åŠ æ‹‰ç“œ: [-85.207229, 12.865416],
    è·å…°: [5.291265999999999, 52.132633],
    æŒªå¨: [8.468945999999999, 60.47202399999999],
    å°¼æ³Šå°”: [84.12400799999999, 28.394857],
    æ–°è¥¿å…°: [174.885971, -40.900557],
    é˜¿æ›¼: [55.923255, 21.512583],
    å·´åŸºæ–¯å¦: [69.34511599999999, 30.375321],
    å·´æ‹¿é©¬: [-80.782127, 8.537981],
    ç§˜é²: [-75.015152, -9.189967],
    è²å¾‹å®¾: [121.774017, 12.879721],
    å·´å¸ƒäºšæ–°å‡ å†…äºš: [143.95555, -6.314992999999999],
    æ³¢å…°: [19.145136, 51.919438],
    æ³¢å¤šé»å„: [-66.590149, 18.220833],
    åŒ—æœé²œ: [127.510093, 40.339852],
    è‘¡è„ç‰™: [-8.224454, 39.39987199999999],
    å·´æ‹‰åœ­: [-58.443832, -23.442503],
    å¡å¡”å°”: [51.183884, 25.354826],
    ç½—é©¬å°¼äºš: [24.96676, 45.943161],
    ä¿„ç½—æ–¯: [105.318756, 61.52401],
    å¢æ—ºè¾¾: [29.873888, -1.940278],
    è¥¿æ’’å“ˆæ‹‰: [-12.885834, 24.215527],
    æ²™ç‰¹é˜¿æ‹‰ä¼¯: [45.079162, 23.885942],
    è‹ä¸¹: [30.217636, 12.862807],
    å—è‹ä¸¹: [31.3069788, 6.876991899999999],
    å¡å†…åŠ å°”: [-14.452362, 14.497401],
    æ‰€ç½—é—¨ç¾¤å²›: [160.156194, -9.64571],
    å¡æ‹‰åˆ©æ˜‚: [-11.779889, 8.460555],
    è¨å°”ç“¦å¤š: [-88.89653, 13.794185],
    ç´¢é©¬é‡Œå…°: [46.8252838, 9.411743399999999],
    ç´¢é©¬é‡Œ: [46.199616, 5.152149],
    å¡å°”ç»´äºšå…±å’Œå›½: [21.005859, 44.016521],
    è‹é‡Œå—: [-56.027783, 3.919305],
    æ–¯æ´›ä¼å…‹: [19.699024, 48.669026],
    æ–¯æ´›æ–‡å°¼äºš: [14.995463, 46.151241],
    ç‘å…¸: [18.643501, 60.12816100000001],
    æ–¯å¨å£«å…°: [31.465866, -26.522503],
    å™åˆ©äºš: [38.996815, 34.80207499999999],
    ä¹å¾—: [18.732207, 15.454166],
    å¤šå“¥: [0.824782, 8.619543],
    æ³°å›½: [100.992541, 15.870032],
    å¡”å‰å…‹æ–¯å¦: [71.276093, 38.861034],
    åœŸåº“æ›¼æ–¯å¦: [59.556278, 38.969719],
    ä¸œå¸æ±¶: [125.727539, -8.874217],
    ç‰¹é‡Œå°¼è¾¾å’Œå¤šå·´å“¥: [-61.222503, 10.691803],
    çªå°¼æ–¯: [9.537499, 33.886917],
    åœŸè€³å…¶: [35.243322, 38.963745],
    å¦æ¡‘å°¼äºšè”åˆå…±å’Œå›½: [34.888822, -6.369028],
    ä¹Œå¹²è¾¾: [32.290275, 1.373333],
    ä¹Œå…‹å…°: [31.16558, 48.379433],
    ä¹Œæ‹‰åœ­: [-55.765835, -32.522779],
    ç¾å›½: [-95.712891, 37.09024],
    ä¹Œå…¹åˆ«å…‹æ–¯å¦: [64.585262, 41.377491],
    å§”å†…ç‘æ‹‰: [-66.58973, 6.42375],
    è¶Šå—: [108.277199, 14.058324],
    ç“¦åŠªé˜¿å›¾: [166.959158, -15.376706],
    è¥¿å²¸: [35.3027226, 31.9465703],
    ä¹Ÿé—¨: [48.516388, 15.552727],
    å—é: [22.937506, -30.559482],
    èµæ¯”äºš: [27.849332, -13.133897],
    æ´¥å·´å¸ƒéŸ¦: [29.154857, -19.015438],
    ç§‘æ‘©ç½—: [43.872219, -11.875001],
    å°åº¦å°¼è¥¿äºš: [106.515414, -6.10304],
    å°åº¦: [78.96288, 20.593684],
  };
</script>

<style lang="scss" scoped>

  .pie-wrapper {
    width: 100%;
    height: 100%;
    position: relative;

    .mapWorld {
      width: 100%;
      height: 100%;
    }
  }
</style>

```

- ğŸ¥ æ•ˆæœå±•ç¤º

<video src="/video/å®Œæ•´çš„ä¸–ç•Œåœ°å›¾.mp4" controls autoplay loop muted   width="100%"></video>

## ğŸ‡¨ğŸ‡³ å…¨å›½

- ä»£ç 

```javascript
<template>
  <div v-loading="loading" class="charts-box" element-loading-text="åŠ è½½ä¸­...">
    <div class="pie-wrapper">
      <div id="mapWorld" class="mapWorld">123</div>
    </div>
  </div>
</template>

<script lang="ts" setup>
  import { ref, onMounted } from 'vue';
  // éœ€è¦å®‰è£…echarts-gl
  import 'echarts-gl';
  import { zxios } from '@/services/api';
  import 'echarts/extension/bmap/bmap';
  import { toMoney } from '@/utils/publicFunc';
  const ec = <any>inject('echarts');
  let chart = <any>{};
  let mapChart = <any>{};
  let dataMap = <any[]>[];
  let options = <any>{};

  onMounted(() => {
    chart = ec.init(document.getElementById('mapWorld'));
    mapOption();
    chart.on('click', (ev) => {
      emits('chartClick', ev.name, mapWorld, ev);
    });

    window.onresize = function () {
      //è‡ªé€‚åº”å¤§å°
      chart.resize();
    };
  });
  const mapOption = () => {
    dataPie.value.map((item) => {
      dataMap.push({
        name: item.name,
        value: item.amount,
        type: item.type,
      });
    });
    zxios.get('./json/China.json').then((geoJson) => {
      ec.registerMap('China', geoJson);
      options = {
        backgroundColor: '#ffffff',
        tooltip: {
          trigger: 'item',
          position: 'top',
          backgroundColor: 'rgba(0,0,0,0.47)',
          formatter: (params) => {
            return `
              <span style="color: #fff;font-size: 14px;font-family: PingFangSC-Medium, PingFang SC;font-weight: 500;">${
                params.name
              }:${params.value[2] > 0 ? toMoney(params.value[2]) : toMoney(params.value)}</span>
          `;
          },
        },

        visualMap: {
          show: true,
          min: 0,
          max: visual(formatHighLevel(dataMap)),
          right: 10,
          top: 'bottom',
          itemWidth: 10,
          itemHeight: 120,
          realtime: true,
          hoverLink: true,
          calculable: true,
          seriesIndex: [0],
          text: ['', ''],
          inRange: {
            color: ['#1587FF', '#001EBF'],
          },
        },
        geo: {
          show: true,
          map: 'China',
          emphasis: {
            areaColor: '#0a2dae', //æ‚¬æµ®åŒºèƒŒæ™¯
            borderColor: '#ffffff',
            borderWidth: 0,
            shadowBlur: 10,
            shadowColor: 'rgba(0, 0, 0, 0.5)',
            shadowOffsetX: 10,
            shadowOffsetY: 10,
            itemStyle: {
              areaColor: '#0054CC',
              borderColor: '#fff',
              borderType: 'solid',
              borderWidth: 1,
            },
            label: {
              show: false,
            },
          },
          roam: true,

          zoom: 1.2,
        },
        series: [
          {
            type: 'map',
            map: 'China',
            geoIndex: 0,
            aspectScale: 0.75, //é•¿å®½æ¯”
            showLegendSymbol: false, // å­˜åœ¨legendæ—¶æ˜¾ç¤º
            emphasis: {
              show: false,
              color: '#fff',
            },
            roam: true,

            animation: true,
            data: dataMap,
          },
          // {
          //   name: 'ç‚¹',
          //   type: 'scatter',
          //   coordinateSystem: 'geo',
          //   zlevel: 6,
          // },
          {
            name: 'Top 5',
            type: 'effectScatter',
            coordinateSystem: 'geo',
            data: convertData(
              dataMap.sort(function (a, b) {
                return b.value - a.value;
              }),
            ),
            symbolSize: function (val) {
              return val[2] > 0 ? 10 : 0;
            },
            showEffectOn: 'render',
            rippleEffect: {
              brushType: 'stroke',
            },
            emphasis: {
              scale: true,
            },
            label: {
              formatter: '{b}',
              position: 'right',
              show: false,
            },
            itemStyle: {
              color: '#FC982A',
              shadowBlur: 10,
              shadowColor: '#FC982A',
            },
            zlevel: 1,
          },
        ],
      };
      chart.setOption(options);
    });
  };
  let dataPie = ref<any>([
    { name: 'æµ™æ±Ÿçœ', amount: 657, type: 'province' },
    { name: 'æ²³åŒ—çœ', amount: 155, type: 'province' },
    { name: 'å››å·çœ', amount: 95, type: 'province' },
    { name: 'å¹¿ä¸œçœ', amount: 4, type: 'province' },
    { name: 'é‡åº†å¸‚', amount: 12, type: 'province' },
    { name: 'æµ·å—çœ', amount: 5, type: 'province' },
    { name: 'å®‰å¾½çœ', amount: 1, type: 'province' },
    { name: 'å±±ä¸œçœ', amount: 12, type: 'province' },
    { name: 'æ±Ÿè‹çœ', amount: 888, type: 'province' },
    { name: 'å°æ¹¾çœ', amount: 552, type: 'province' },
    { name: 'æ–°ç–†ç»´å¾å°”è‡ªæ²»åŒº', amount: 0, type: 'province' },
    { name: 'äº‘å—çœ', amount: 0, type: 'province' },
    { name: 'è¥¿è—è—æ—è‡ªæ²»åŒº', amount: 850, type: 'province' },
    { name: 'æ²³å—çœ', amount: 0, type: 'province' },
    { name: 'è´µå·çœ', amount: 22, type: 'province' },
    { name: 'æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº', amount: 0, type: 'province' },
    { name: 'é»‘é¾™æ±Ÿçœ', amount: 0, type: 'province' },
    { name: 'æ±Ÿè¥¿çœ', amount: 550, type: 'province' },
    { name: 'å†…è’™å¤è‡ªæ²»åŒº', amount: 570, type: 'province' },
    { name: 'æ¹–å—çœ', amount: 2, type: 'province' },
    { name: 'å¤©æ´¥å¸‚', amount: 0, type: 'province' },
    { name: 'é™•è¥¿çœ', amount: 20, type: 'province' },
    { name: 'åŒ—äº¬å¸‚', amount: 580, type: 'province' },
    { name: 'æ¹–åŒ—çœ', amount: 30, type: 'province' },
    { name: 'å‰æ—çœ', amount: 70, type: 'province' },
    { name: 'ä¸Šæµ·å¸‚', amount: 920, type: 'province' },
    { name: 'è¾½å®çœ', amount: 50, type: 'province' },
    { name: 'å±±è¥¿çœ', amount: 65, type: 'province' },
    { name: 'é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº', amount: 0, type: 'province' },
    { name: 'ç”˜è‚ƒçœ', amount: 50, type: 'province' },
    { name: 'ç¦å»ºçœ', amount: 880, type: 'province' },
    { name: 'å¹¿è¥¿å£®æ—è‡ªæ²»åŒº', amount: 550, type: 'province' },
    { name: 'é’æµ·çœ', amount: 20, type: 'province' },
    { name: 'å®å¤å›æ—è‡ªæ²»åŒº', amount: 0, type: 'province' },
  ]);
  let geoCoordMap = {
    å°æ¹¾çœ: [121.5135, 25.0308],
    é»‘é¾™æ±Ÿçœ: [127.9688, 45.368],
    å†…è’™å¤è‡ªæ²»åŒº: [110.3467, 41.4899],
    å‰æ—çœ: [125.8154, 44.2584],
    åŒ—äº¬å¸‚: [116.4551, 40.2539],
    è¾½å®çœ: [123.1238, 42.1216],
    æ²³åŒ—çœ: [114.4995, 38.1006],
    å¤©æ´¥å¸‚: [117.4219, 39.4189],
    å±±è¥¿çœ: [112.3352, 37.9413],
    é™•è¥¿çœ: [109.1162, 34.2004],
    ç”˜è‚ƒçœ: [103.5901, 36.3043],
    å®å¤å›æ—è‡ªæ²»åŒº: [106.3586, 38.1775],
    é’æµ·çœ: [101.4038, 36.8207],
    æ–°ç–†ç»´å¾å°”æ—è‡ªæ²»åŒº: [87.9236, 43.5883],
    è¥¿è—è—æ—è‡ªæ²»åŒº: [91.11, 29.97],
    å››å·çœ: [103.9526, 30.7617],
    é‡åº†å¸‚: [108.384366, 30.439702],
    å±±ä¸œçœ: [117.1582, 36.8701],
    æ²³å—çœ: [113.4668, 34.6234],
    æ±Ÿè‹çœ: [118.8062, 31.9208],
    å®‰å¾½çœ: [117.29, 32.0581],
    æ¹–åŒ—çœ: [114.3896, 30.6628],
    æµ™æ±Ÿçœ: [119.5313, 29.8773],
    ç¦å»ºçœ: [119.4543, 25.9222],
    æ±Ÿè¥¿çœ: [116.0046, 28.6633],
    æ¹–å—çœ: [113.0823, 28.2568],
    è´µå·çœ: [106.6992, 26.7682],
    äº‘å—çœ: [102.9199, 25.4663],
    å¹¿ä¸œçœ: [113.12244, 23.009505],
    å¹¿è¥¿çœ: [108.479, 23.1152],
    æµ·å—çœ: [110.3893, 19.8516],
    ä¸Šæµ·å¸‚: [121.4648, 31.2891],
    æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº: [113.5440083, 22.20167546],
    é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº: [114.109497, 22.396428],
  };
  const convertData = (data) => {
    var res = <any[]>[];
    for (var i = 0; i < data.length; i++) {
      var geoCoord = geoCoordMap[data[i].name];
      if (geoCoord) {
        res.push({
          name: data[i].name,
          value: geoCoord.concat(data[i].value),
        });
      }
    }
    return res;
  };
  const formatHighLevel = (data) => {
    let arr = <any[]>[];
    data.map((item) => {
      arr.push(item.value);
    });
    return Math.max(...arr);
  };
  const visual = (num) => {
    let max = 1;
    if (num > 0) {
      const length = num.toString().length;
      if (length === 1) {
        max = 10;
      } else if (length === 2) {
        max = 100;
      } else if (length === 3) {
        max = 1000;
      } else if (length === 4) {
        max = 10000;
      } else if (length === 5) {
        max = 100000;
      } else if (length === 6) {
        max = 1000000;
      } else {
        max = 10000000;
      }
    } else {
      max = 1;
    }
    return max;
  };
</script>

<style lang="scss" scoped>
  .pie-wrapper {
    width: 100%;
    height: 100%;
    position: relative;

    .mapWorld {
      width: 100%;
      height: 100%;
    }
  }
</style>

```

- ğŸ¥ æ•ˆæœå±•ç¤º

<video src="/video/å…¨å›½çš„åœ°å›¾.mp4" controls autoplay loop muted   width="100%"></video>

## ğŸï¸ çœçº§

- ä»£ç 

```javascript
<template>
  <div v-loading="loading" class="charts-box" element-loading-text="åŠ è½½ä¸­...">
    <div class="pie-wrapper">
      <div id="mapWorld" class="mapWorld">123</div>
    </div>
  </div>
</template>

<script lang="ts" setup>
  import { ref, onMounted } from 'vue';
  // éœ€è¦å®‰è£…echarts-gl
  import 'echarts-gl';
  import { zxios } from '@/services/api';
  import 'echarts/extension/bmap/bmap';
  import { toMoney } from '@/utils/publicFunc';
  const ec = <any>inject('echarts');
  import pinyin from 'js-pinyin';
  let chart = <any>{};
  let mapChart = <any>{};
  let dataMap = <any[]>[];
  let options = <any>{};

  onMounted(() => {
    chart = ec.init(document.getElementById('mapWorld'));
    mapOptionSet();
    chart.on('click', (ev) => {
      emits('chartClick', ev.name, mapWorld, ev);
    });

    window.onresize = function () {
      //è‡ªé€‚åº”å¤§å°
      chart.resize();
    };
  });
  let selectedPlacePin = '';
  const mapOptionSet = () => {
    let mapZoom = 1;
    const dataForMap = <any>[];
    let highLevel = 1;
    let scale = 1;

    let max = 0;
    if (!dataPie.value?.length) {
      // å¦‚æœåœ°å›¾å·²ç»åˆå§‹åŒ–ä¸”å·²åŠ è½½ geoJson
      if (chart && chart.getOption()?.series && chart.getOption()?.series.length > 0) {
        // åªæ¸…ç©ºæ•°æ®ï¼Œä¸åŠ¨ geo é…ç½®
        chart.setOption(
          {
            series: [
              {
                ...chart.getOption().series[0],
                data: [],
              },
            ],
          },
          true,
        );
      }
      // return;
    } else {
      dataPie.value.map((item: any) => {
        dataForMap.push({
          name: item.name,
          value: item.amount,
          type: item.type,
        });
      });
      max = dataForMap[0].value;
      for (let i = 0; i < dataForMap.length - 1; i++) {
        max = max < dataForMap[i + 1].value ? dataForMap[i + 1].value : max;
      }
    }

    highLevel = visual(max);

    let formateShow = (data) => {
      let arr: any = [];
      let bol = true;
      areaMinArr.map((item) => {
        if (data.name === item) {
          bol = bol && false;
        } else {
          bol = bol && true;
        }
      });
      if (bol) {
        if (data.value && !isNaN(data.value)) {
          arr.push(`{icon2|}`);
        }
        arr.push(
          '{a|' + toMoney(isNaN(data.value) ? 0 : data.value) + '}\n',
          '{b|' + data.name + '}',
        );
      } else {
        arr = [''];
      }
      return arr.join('');
    };

    zxios.get('./json/zhejiang.json').then((geoJson) => {
      ec.registerMap('zhejiang', geoJson);
      options = {
        tooltip: {
          trigger: 'item',
          backgroundColor: 'rgba(0, 0, 0, 0.55)',
          // formatter: '{c}<br />{b}',
          formatter: function (params) {
            return name + '<br />' + toMoney(value);
          },
          textStyle: {
            fontSize: 16,
            textShadowColor: '#000',
            textShadowBlur: 4,
            textShadowOffsetX: 0,
            textShadowOffsetY: 2,
          },
        },
        visualMap: {
          type: 'continuous',
          itemWidth: 10,
          itemHeight: 120,
          fontSize: 12,
          min: 0,
          max: highLevel,
          right: 10,
          text: ['', ''],
          realtime: true,
          hoverLink: true,
          calculable: true,
          inRange: {
            color: ['#1587FF', '#001EBF'],
          },
        },
        series: [
          {
            type: 'map',
            map: 'zhejiang',
            aspectScale: scale, // é•¿å®½æ¯”
            center: null,
            roam: false,
            emphasis: {
              label: {
                show: true,
                color: '#fff',
              },
              itemStyle: {
                areaColor: '#1587FF',
                borderColor: '#ffffff',
                borderWidth: 0,
                shadowBlur: 8,
                shadowColor: 'rgba(0, 0, 0, 0.5)',
                shadowOffsetX: 8,
                shadowOffsetY: 10,
              },
            },
            label: {
              show: true,
              color: 'white',
              // fontSize: 14,
              fontWeight: 'bold',
              formatter: formateShow,
              textShadowColor: '#000',
              textShadowBlur: 9,
              textShadowOffsetX: 0,
              textShadowOffsetY: 4,
              rich: {
                icon1: {
                  height: 24,
                  width: 18,
                  align: 'right',
                },
                icon2: {
                  height: 24,
                  width: 18,
                  align: 'right',
                },
                a: {
                  fontSize: 18,
                  color: '#fff',
                  width: 20,
                  height: 20,
                  lineHeight: 20,
                  align: 'center',
                },
                b: {
                  fontSize: 14,
                  color: '#fff',
                  width: 60,
                },
              },
            },
            itemStyle: {
              areaColor: '#408AF6',
              borderColor: '#fff',
              borderType: 'solid',
              borderWidth: 2,
            },
            zoom: mapZoom,
            data: dataForMap,
          },
        ],
      };
      chart.setOption(options);
    });
  };
  let dataPie = ref<any>([
    { name: 'æ¹–å·å¸‚', amount: 857, type: 'province' },
    { name: 'æ­å·å¸‚', amount: 655, type: 'province' },
    { name: 'é‡‘åå¸‚', amount: 350, type: 'province' },
    { name: 'æ¸©å·å¸‚', amount: 500, type: 'province' },
    { name: 'å®æ³¢å¸‚', amount: 200, type: 'province' },
    { name: 'ä¸½æ°´å¸‚', amount: 300, type: 'province' },
    { name: 'èˆŸå±±å¸‚', amount: 500, type: 'province' },
  ]);
  let areaMinArr = [];

  const visual = (num) => {
    let max = 1;
    if (num > 0) {
      const length = num.toString().length;
      if (length === 1) {
        max = 10;
      } else if (length === 2) {
        max = 100;
      } else if (length === 3) {
        max = 1000;
      } else if (length === 4) {
        max = 10000;
      } else if (length === 5) {
        max = 100000;
      } else if (length === 6) {
        max = 1000000;
      } else {
        max = 10000000;
      }
    } else {
      max = 1;
    }
    return max;
  };
</script>

<style lang="scss" scoped>
  .pie-wrapper {
    width: 100%;
    height: 100%;
    position: relative;

    .mapWorld {
      width: 100%;
      height: 100%;
    }
  }
</style>

```

- ğŸ¥ æ•ˆæœå±•ç¤º

<img src="/img/çœçº§åœ°å›¾.jpg" controls autoplay loop muted   width="100%"></img>

## ğŸ™ï¸ åŒºçº§

-åŒºåŸŸå°±ä¸å±•ç¤ºäº†æ•ˆæœè·Ÿçœçº§çš„æ˜¯ä¸€æ ·çš„ï¼Œåªéœ€è¦æŠŠçœåæ¢æˆåŒºååŒæ—¶æŠŠæ•°æ®æ¢æˆåŒºçš„æ•°æ®å°± ok äº†

## ğŸ¨ å®Œæ•´çš„æ•ˆæœ

- ğŸ¥ æ•ˆæœå±•ç¤º

<video src="/video/å®Œæ•´çš„å†…å®¹.mp4" controls autoplay loop muted   width="100%"></video>

## æ€»ç»“

- 1ã€ä¸»è¦åº”ç”¨çš„æ˜¯ echarts å’Œé™æ€æ•°æ®çš„åæ ‡ç»˜åˆ¶å‡ºæ¥çš„ï¼Œå¦‚æœæƒ³è¦åŠ¨æ€çš„åœ°å€ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ datav é‡Œé¢çš„æ•°æ®
- 2ã€åœ°çƒçš„å›¾çš„åŸç†æ˜¯å…ˆç”¨ç”»å¸ƒç”»å‡ºå¤§æ¦‚çš„ä½ç½®ï¼ŒåŒæ—¶ç”¨ echarts-gl ç”»å‡ºçƒä½“ï¼Œæœ€åå†ç”¨ map æŠŠæ‰€æœ‰çš„åœ°å›¾é“ºä¸Šå»å°± ok
- 3ã€ä¸‹è½¬çš„åŸç†ä¹Ÿæ˜¯é€šè¿‡ç‚¹å‡»å¯¹åº”çš„ä½ç½®ï¼Œç„¶ååˆ‡æ¢åˆ°ä¸åŒçš„ç±»å‹çš„é¡µé¢æ¥å®ç°çš„ï¼Œä»å›½å®¶å¼€å§‹åˆ°åŒºéƒ½æ˜¯å¯ä»¥ç”¨åŒä¸€ä¸ªå›¾ï¼Œé€šè¿‡ä¸åŒæ•°æ®æ¥åˆ‡æ¢é¡µé¢ã€‚ï¼ˆå»ºè®®å›½å®¶æ˜¯å•ç‹¬çš„ï¼Œå¤„ç†èµ·æ¥ä¼šç®€å•ä¸€ç‚¹ï¼‰

## å‚è€ƒé“¾æ¥

- [datav çš„æ•°æ®è·å–](https://datav.aliyun.com/portal/school/atlas/area_selectorhttps://datav.aliyun.com/portal/school/atlas/area_selector)

:::tip

<span style="color:red;">é¡¹ç›®ä¸­å·²å®Œæˆå›¾å½¢ç»„ä»¶åŒ–å°è£…ï¼Œæ”¯æŒåœ°å›¾åŠå¤šç§å¯è§†åŒ–å±•ç¤ºç±»å‹ã€‚</span>
:::
